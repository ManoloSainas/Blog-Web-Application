<%- include("partials/header.ejs") %>

<div class="form-homepage">
  <h3 class="h3">Insert a new post</h3>
  <form action="/submit" method="POST">
    <div class="mb-3">
      <label class="form-label" for="title">Title:</label>
      <input
        class="form-control"
        type="text"
        name="title"
        id="title"
        required
      />
    </div>
    <div class="mb-3">
      <label class="form-label" for="blogPost">Blog Post:</label>
      <textarea
        class="form-control"
        name="blogPost"
        rows="6"
        id="blogPost"
        required
      ></textarea>
    </div>
    <div class="send-post-button">
      <button class="btn btn-primary" type="submit">Send post</button>
    </div>
  </form>
</div>

<hr class="border border-1 opacity-75" />

<div class="container mt-5 post">
  <% if(posts.length === 0){ %>
  <h3 class="text-center text-muted">No posts yet</h3>
  <% } else { %> <% posts.forEach((post, index) => { %>
    <div class="d-flex gap-3">
      <div class="d-flex align-items-center">
        <button type="button" class="btn btn-outline-secondary btn-lg mx-2">
          <i class="bi bi-arrow-left"></i>
        </button>
      </div>
      
      <div class="border rounded p-3 mb-3">
        <h4>Title: <br /><p class="fw-light"> <%= post.title %> </span></p>
        <h5>Post: <br /><p class="fw-light"> <%= post.body %> </span></p>
        <div class="d-flex gap-2 justify-content-center">
          <form action="/editPost?index=<%= index %>" method="GET" class="m-0">
            <input type="hidden" name="index" value="<%= index %>" />
            <button type="submit" class="btn btn-warning btn-sm">Edit</button>
          </form>
          <form action="/deletePost" method="POST" class="m-0">
            <input type="hidden" name="index" value="<%= index %>" />
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </div>

      <div class="d-flex align-items-center">
        <button type="button" class="btn btn-outline-secondary btn-lg mx-2">
          <i class="bi bi-arrow-right"></i>
        </button>
      </div>
      
    </div>
  <% }) %> <% } %>
</div>

<%- include("partials/footer.ejs") %>
